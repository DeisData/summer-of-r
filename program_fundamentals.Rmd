---
title: "Program Fundamentals"
author: "Claire Pontbriand and Margarita Corral"
date: "2020/07/28"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# R Program Management

Today we will discuss
- Establishing, controlling, and sharing R Projects
- Writing functions

The scientific process is naturally incremental, and many projects start life as random notes, some code, then a manuscript, and eventually everything is a bit mixed together.

## How can I manage my projects in R?

A good project layout will ultimately make your life easier:

- It will help ensure the integrity of your data: what is original and what is modified;
- It makes it simpler to share your code with someone else (a lab-mate, collaborator, or supervisor);
- It allows you to easily upload your code with your manuscript submission;
- It makes it easier to pick the project back up after a break.

How can I write good software that other people can use?

### 1. Structure your project folder

```{r projecttemplate}
# Install ProjectTemplate

# install.packages("ProjectTemplate")
library("ProjectTemplate")
# create.project(".", merge.strategy = "allow.non.conflict")

```

### 2. Make code readable


### 3. Documentation: tell us what and why, not how
When you first start out, your comments will often describe what a command does. Try to also include comments that tell you why you’re solving a problem, and what problem that is. 

### 4. Keep your code modular
Separate your functions from your analysis scripts, and store them in a separate file that you source when you open the R session in your project. 
This approach leaves you with:
- an uncluttered analysis script, and 
- a repository of useful functions  

### 5. Break down problem into bite size pieces
When you first start out, problem solving and function writing can be daunting tasks, and hard to separate. Try to break down your problem into digestible chunks and worry about the implementation details later: keep breaking down the problem into smaller and smaller functions until you reach a point where you can code a solution, and build back up from there.

### 6. Treat data as read only
This is probably the most important goal of setting up a project. Data is typically time consuming and/or expensive to collect. Working with them interactively (e.g., in Excel) where they can be modified means you are never sure of where the data came from, or how it has been modified since collection. It is therefore a good idea to treat your data as “read-only”.

#### Data Cleaning
In many cases your data will be “dirty”: it will need significant preprocessing to get into a format R (or any other programming language) will find useful. This task is sometimes called “data munging”. Storing these scripts in a separate folder, and creating a second “read-only” data folder to hold the “cleaned” data sets can prevent confusion between the two sets.

### 7. Treat generated output as disposable
Anything generated by your scripts should be treated as disposable: it should all be able to be regenerated from your scripts.

There are lots of different ways to manage this output. Having an output folder with different sub-directories for each separate analysis makes it easier later. Since many analyses are exploratory and don’t end up being used in the final project, and some of the analyses get shared between projects.

### 8. Test your code
Use an obvious input to see how your script or functions are working.



#### References:

- [Sofware Carpentry - R for Reproducible Scientific Analysis](http://swcarpentry.github.io/r-novice-gapminder/)
- [More on Control Flow and conditionals](http://swcarpentry.github.io/r-novice-gapminder/07-control-flow/index.html)
- [Functions Explained](http://swcarpentry.github.io/r-novice-gapminder/10-functions/index.html)
- [Making Packages in R](http://swcarpentry.github.io/r-novice-inflammation/08-making-packages-R/index.html)


